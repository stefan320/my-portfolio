.projects {
  @include paddingY;

  &__intro {
    @include paddingY;
    @include wrapper;
    text-align: center;
    background-color: #e5e5e5;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    align-items: center;

    & > h1 {
      @include respond(tab-land) {
        align-self: start;
      }
    }

    &--img {
      @include paddingY;
    }

    &--img > img,
    &--img > source {
      max-height: 55vh;
      max-width: 100%;
      object-fit: cover;
    }
  }

  &--blue {
    background-color: $color-primary;
  }

  &--grey {
    background-color: $color-grey-dark;
  }

  &__desc {
    @include respond(tab-land) {
      display: grid;
      grid-template-columns: 140px 1fr minmax(850px, 1000px) 1fr 140px;
      align-items: center;
      align-content: center;
    }

    @include respond(tab-land) {
      padding: 10rem 0;
    }

    @include respond(desktop-lg) {
      grid-template-columns: 140px 1fr minmax(1000px, 1200px) 1fr 140px;
    }
  }

  &__desc:last-child {
    clip-path: polygon(50% 100%, 100% 90%, 100% 0, 0 0, 0 90%);
    padding-bottom: 7rem; //Large padding to make up for space lost by clip path
    @include respond(tab-land) {
      padding-bottom: calc(
        10rem + 7.1rem
      ); // 10 to match top + 7.1 to make up for the negative margin given to contact section
    }
  }

  &__overlay {
    display: none;

    @include respond(tab-land) {
      display: inline-block;
      width: 101%;
      height: 101%;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      transition: all 0.5s;
      background-size: cover;
      background-position: center top;
      background-repeat: no-repeat;
    }

    &--survey {
      @include respond(tab-land) {
        background-image: url(../../assets/images-md/dynamic-survey-screenshot.jpg);
      }
    }

    &--cad {
      @include respond(tab-land) {
        background-image: url(../../assets/images-md/inventor-screenshot.jpg);
      }
    }

    &--jmb {
      @include respond(tab-land) {
        background-image: url(../../assets/images-md/jmb-landing1150w.png);
      }
    }

    &--sandwich {
      @include respond(tab-land) {
        background-image: url(../../assets/images-md/sandwich-landing1150w.jpg);
      }
    }

    &--bmw {
      @include respond(tab-land) {
        background-image: url(../../assets/images-md/bmw-landing1150w.jpg);
      }
    }

    &--blog {
      @include respond(tab-land) {
        background-image: url(../../assets/images-md/blog-landing1150w.jpg);
      }
    }

    &__line {
      display: none;

      @include respond(tab-land) {
        display: block;
        position: absolute;
        bottom: -25px;
        background-color: #fff;
      }
    }

    &__line--x {
      @include respond(tab-land) {
        right: -24px;
        width: 250px;
        height: 2px;
      }
    }

    &__line--y {
      @include respond(tab-land) {
        right: -25px;
        width: 2px;
        height: 250px;
      }
    }
  }

  &__details {
    @include paddingY;
    @include wrapper;
    text-align: center;

    @include respond(tab-land) {
      display: grid;
      grid-template-columns: 1fr 50% 1fr 35%;
      grid-template-rows: 80px 110px auto;
      grid-column: 3 / 4;
      padding: 0;
      background-color: $color-grey-light;
      position: relative;
      text-align: left;
      min-height: 70vh;
    }

    @include respond(desktop-lg) {
      grid-template-columns: 1fr 45% 1fr 40%;
    }

    &--list {
      font-weight: 700;
      padding-top: 20px;
      padding-left: 20px;
      font-size: 1.6rem;

      & li {
        text-align: initial;
        font-size: inherit;
        line-height: 1.5;
        padding-bottom: 0.5rem;
      }
    }

    &--first--row {
      display: none;
      &--blue {
        @include respond(tab-land) {
          @include projects-first-row-align;
          background-color: $color-primary;
        }
      }

      &--grey {
        @include respond(tab-land) {
          @include projects-first-row-align;
          background-color: $color-grey-dark;
        }
      }
    }

    &--arrow {
      display: none;
      @include respond(tab-land) {
        display: block;
        height: 4.5rem;
        width: 4.5rem;
        cursor: pointer;
      }
    }

    &--heading {
      @include respond(tab-land) {
        grid-row: 2 /3;
        grid-column: 2 / 3;
        color: $color-secondary;
        align-self: center;
      }
    }

    &--img {
      &--mobile,
      &--mobile source,
      &--mobile img {
        max-width: 100%;
        max-height: 85vh;
        padding-top: 3rem;

        @include respond(tab-land) {
          display: none;
        }
      }
    }

    &--img {
      display: none;
      background-repeat: no-repeat;
      background-size: cover;
      background-position: center;
      max-width: 100%;

      @include respond(tab-land) {
        display: block;
        grid-column: 4 / -1;
        grid-row: 1 / -1;
      }

      &--survey {
        @include respond(tab-land) {
          background-image: url(../../assets/images-sm/dynamic-survey-mobile-screenshot-417w.jpg);
        }
      }

      &--cad {
        @include respond(tab-land) {
          background-image: url(../../assets/images-sm/revit-screenshot.jpg);
        }
      }

      &--jmb {
        @include respond(tab-land) {
          background-image: url(../../assets/images-sm/jmb-400w.jpg);
        }
      }

      &--tsh {
        @include respond(tab-land) {
          background-image: url(../../assets/images-sm/sandwich-house-400w.jpg);
        }
      }

      &--bmw {
        @include respond(tab-land) {
          background-image: url(../../assets/images-sm/bmw-400w.jpg);
        }
      }

      &--blog {
        @include respond(tab-land) {
          background-image: url(../../assets/images-sm/blog-400w.jpg);
        }
      }
    }

    &--summary {
      @include paddingY;

      @include respond(tab-land) {
        padding: 0;
        grid-row: 3 / 4;
        grid-column: 2/3;
        font-size: 1.6rem;
        max-height: 80%;
        overflow-y: scroll;
        color: $color-primary;
      }
      .paragraph {
        @include respond(tab-land) {
          color: $color-primary;
        }
      }
    }
  }

  &__links {
    @include respond(tab-land) {
      text-align: center;
      position: absolute;
      width: 130px;
      bottom: calc(
        -25px - 0.7rem
      ); // same as the line - half the font weight to align text to the middle
      right: 230px;
    }
    &--container {
      @include respond(tab-land) {
        height: 1.7rem;
        perspective: 150rem;
        transform-style: preserve-3d;
      }
    }

    &--visit,
    &--learn {
      color: $color-secondary;
      text-decoration: none;
      font-size: 1.4rem;
      font-weight: 700;
      transition: transform 0.4s;
      width: 100%;
      transform-origin: top;
      cursor: pointer;

      @include respond(tab-land) {
        position: absolute;
        top: 0;
        left: 0;
      }
    }

    &--visit {
      @include respond(tab-land) {
        transform: rotateX(-90deg);
      }
    }

    &--learn {
      display: none;
      @include respond(tab-land) {
        display: block;
      }
    }
  }
}
